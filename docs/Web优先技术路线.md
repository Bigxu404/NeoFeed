# NeoFeed Web 优先技术路线

## 🎯 产品定位调整

**从 Telegram Bot 到 Web First**

### 为什么改变？
- ✅ Web 界面更直观、功能更丰富
- ✅ 无需依赖第三方平台（Telegram）
- ✅ 更容易扩展（浏览器扩展、PWA、移动端）
- ✅ 适合个人信息中枢的定位

### 新的信息输入优先级

1. **Web 界面** - 主要入口（当前）
2. **浏览器扩展** - 快速收藏（下一步）
3. **移动端 PWA** - 随时记录（未来）
4. **Telegram Bot** - 补充渠道（可选）

---

## 🏗️ 技术架构

### 整体架构

```
┌─────────────┐       ┌──────────────┐       ┌──────────────┐
│  前端层      │       │   API 层     │       │  数据层      │
├─────────────┤       ├──────────────┤       ├──────────────┤
│             │       │              │       │              │
│ Next.js Web │◄─────►│  FastAPI     │◄─────►│   SQLite     │
│             │       │              │       │  (开发环境)   │
│ React +     │  HTTP │ + Pydantic   │  ORM  │              │
│ TypeScript  │       │              │       │  PostgreSQL  │
│             │       │              │       │  (生产环境)   │
└─────────────┘       └──────┬───────┘       └──────────────┘
                             │
                             │ 调用
                             ▼
                      ┌──────────────┐
                      │  核心模块     │
                      ├──────────────┤
                      │ • Fetcher    │
                      │ • Processor  │
                      │ • Database   │
                      └──────────────┘
```

### 技术选型

| 层级 | 技术 | 理由 |
|------|------|------|
| 前端 | Next.js 14 | App Router, RSC, 性能优秀 |
| 样式 | Tailwind CSS | 快速开发，现代美观 |
| 后端 | FastAPI | 快速、类型安全、自动文档 |
| 数据库 | SQLite → PostgreSQL | 开发简单，生产可靠 |
| AI | OpenAI API | 成熟、效果好、成本可控 |
| 抓取 | Jina Reader API | 免费、强大、支持复杂网页 |

---

## 📅 4 周 MVP 开发计划

### Week 1: 核心功能（✅ 已完成）

**目标**: 能用的 Web 界面 + 后端 API

- [x] 数据库设计与初始化
- [x] FastAPI 后端 API
  - [x] 保存文本/链接
  - [x] 列表查询
  - [x] 统计接口
- [x] Next.js 前端界面
  - [x] 保存表单
  - [x] 信息列表
  - [x] 统计面板
- [x] URL 自动抓取（Jina Reader）
- [x] AI 处理（可选）

**验收标准**:
- ✅ 能保存文本和链接
- ✅ 能查看已保存的信息
- ✅ URL 自动提取内容
- ✅ 界面美观、响应式

---

### Week 2: 体验优化（计划中）

**目标**: 更好用、更快、更稳定

#### 2.1 前端优化
- [ ] 搜索功能（全文搜索）
- [ ] 标签系统
  - [ ] 添加/编辑标签
  - [ ] 标签筛选
  - [ ] 标签云
- [ ] 详情页面
  - [ ] 单独详情页
  - [ ] 编辑功能
  - [ ] 删除功能
- [ ] 加载状态优化
  - [ ] Skeleton Loading
  - [ ] 分页/无限滚动
- [ ] 快捷键支持
  - [ ] `Ctrl/Cmd + K` 快速保存
  - [ ] `Ctrl/Cmd + F` 搜索

#### 2.2 后端优化
- [ ] 全文搜索接口（SQLite FTS5）
- [ ] 标签 CRUD 接口
- [ ] 批量操作接口
- [ ] 导出功能（JSON/CSV）

#### 2.3 性能优化
- [ ] 接口缓存（Redis）
- [ ] 图片压缩存储
- [ ] API 响应时间监控

---

### Week 3: 浏览器扩展（关键增值）

**目标**: 在任何网页快速保存到 NeoFeed

#### 3.1 Chrome Extension
```
neofeed-extension/
├── manifest.json       # 扩展配置
├── popup/              # 弹窗页面
│   ├── index.html
│   └── popup.js
├── background.js       # 后台脚本
└── content.js          # 内容脚本
```

**功能**:
- [ ] 右键菜单「保存到 NeoFeed」
- [ ] 选中文本保存
- [ ] 当前页面保存
- [ ] 快捷键 `Alt/Option + S`
- [ ] 保存成功提示

#### 3.2 集成
- [ ] 调用本地 API (`http://localhost:8000`)
- [ ] 支持自定义 API 地址（云端部署）
- [ ] 离线队列（网络断开时暂存）

---

### Week 4: 移动端 + 部署

**目标**: 随时随地使用 + 上线

#### 4.1 PWA 支持
- [ ] Service Worker
- [ ] 离线缓存
- [ ] 添加到主屏幕
- [ ] 推送通知（可选）

#### 4.2 移动端优化
- [ ] 响应式布局完善
- [ ] 手势操作（滑动删除等）
- [ ] 移动端输入优化

#### 4.3 部署上线
- [ ] 前端部署（Vercel）
- [ ] 后端部署（Railway/Render）
- [ ] 数据库迁移（Supabase PostgreSQL）
- [ ] 域名绑定
- [ ] HTTPS 配置

---

## 🎨 设计原则

### 1. 极简主义
- 界面干净，无多余元素
- 交互流程短，2 步完成保存
- 文字少，图标多

### 2. 渐进式增强
- 核心功能无需 AI（成本考虑）
- AI 作为增强体验（可选开启）
- 离线可用（PWA）

### 3. 用户隐私
- 本地优先（数据在自己设备）
- 可选云端同步
- 无第三方追踪

---

## 💰 成本估算（月）

| 项目 | 成本 | 说明 |
|------|------|------|
| Vercel 前端 | $0 | Hobby 计划免费 |
| Railway 后端 | $5 | Starter 计划 |
| Supabase 数据库 | $0-25 | 免费层/Pro |
| OpenAI API | $5-20 | 按使用量 |
| 域名 | $10/年 | 可选 |
| **总计** | **$10-50/月** | 个人用户可控 |

### 成本优化建议
1. 初期用免费层（Vercel + Supabase Free）
2. AI 处理设置每日额度
3. 缓存 AI 结果，避免重复调用

---

## 🔮 未来扩展（3-6 个月）

### 功能扩展
- 📊 数据可视化（知识图谱）
- 🔗 信息关联（智能推荐）
- 📝 周报/月报自动生成
- 🎙️ 语音输入
- 📷 OCR 图片识别

### 平台扩展
- 📱 iOS/Android App（React Native）
- 💬 Telegram Bot 集成（补充渠道）
- 📧 邮件转发保存
- 🔗 Zapier/IFTTT 集成

### 协作功能
- 👥 团队空间
- 🔄 信息共享
- 💬 评论讨论

---

## 🎯 当前状态：Week 1 完成 ✅

### 已实现
- ✅ 数据库初始化
- ✅ FastAPI 后端（7 个核心接口）
- ✅ Next.js 前端（3 个组件）
- ✅ URL 自动抓取
- ✅ AI 可选处理
- ✅ 统计面板
- ✅ 响应式设计

### 下一步行动
1. **立即**: 测试当前功能，确保稳定
2. **本周**: 优化 UI，增加搜索和标签
3. **下周**: 开发浏览器扩展

---

## 📝 决策记录

### 为什么选 FastAPI 而不是 Flask？
- 自动生成 API 文档（`/docs`）
- 类型提示，减少 Bug
- 异步支持，性能更好

### 为什么选 Next.js 而不是 Vite + React？
- SSR/SSG，SEO 友好
- 文件路由，开发效率高
- Vercel 部署简单

### 为什么 SQLite 开发，PostgreSQL 生产？
- SQLite 无需安装，快速启动
- PostgreSQL 功能强大，适合生产
- 迁移脚本已准备好

---

**这是一个更符合「个人信息中枢」定位的技术路线！** 🎉

